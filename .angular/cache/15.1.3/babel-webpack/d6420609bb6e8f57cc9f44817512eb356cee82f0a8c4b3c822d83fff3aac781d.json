{"ast":null,"code":"import { TipoPessoa } from 'src/app/shared/model/tipo-pessoa.model';\nimport { TipoPessoaEnum } from '../../shared/enum/tipo-pessoa.enum';\nimport { Vereador } from './../../shared/model/vereador.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../assessores.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/service/mensagemService\";\nimport * as i4 from \"src/app/tipo-pessoa/tipo-pessoa.service\";\nimport * as i5 from \"./../../vereadores/vereadores.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"primeng/button\";\nimport * as i9 from \"primeng/api\";\nimport * as i10 from \"primeng/inputtext\";\nimport * as i11 from \"primeng/dropdown\";\nfunction AssessoresFormComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 13)(2, \"label\");\n    i0.ɵɵtext(3, \"Ativo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"p-dropdown\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function AssessoresFormComponent_div_16_Template_p_dropdown_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.pessoa.ativo = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"options\", ctx_r1.opcoesStatus)(\"ngModel\", ctx_r1.pessoa.ativo);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"75%\"\n  };\n};\nfunction AssessoresFormComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 13)(2, \"label\");\n    i0.ɵɵtext(3, \"Tipo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function AssessoresFormComponent_div_18_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.pessoa.tipoPessoa.descricao = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(4, _c0));\n    i0.ɵɵproperty(\"disabled\", true)(\"ngModel\", ctx_r2.pessoa.tipoPessoa.descricao);\n  }\n}\nfunction AssessoresFormComponent_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AssessoresFormComponent_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.cadastrar());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AssessoresFormComponent_button_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AssessoresFormComponent_button_28_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.atualizar());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport class AssessoresFormComponent {\n  constructor(assessoresService, router, mensagemService, activedRoute, tipoPessoaService, vereadorService) {\n    this.assessoresService = assessoresService;\n    this.router = router;\n    this.mensagemService = mensagemService;\n    this.activedRoute = activedRoute;\n    this.tipoPessoaService = tipoPessoaService;\n    this.vereadorService = vereadorService;\n    this.pessoa = {\n      nome: '',\n      tipoPessoa: new TipoPessoa(),\n      ativo: true,\n      vereador: new Vereador()\n    };\n    this.titulo = 'Cadastrar assessor';\n    this.opcoesStatus = [{\n      value: true,\n      descricao: 'Sim'\n    }, {\n      value: false,\n      descricao: 'Não'\n    }];\n  }\n  ngOnInit() {\n    this.getTipoPessoas();\n    this.getVereadores();\n    this.pessoaId = this.activedRoute.snapshot.paramMap.get('id');\n    if (this.pessoaId !== null) {\n      this.titulo = 'Editar assessor';\n      this.findById(+this.pessoaId);\n    }\n  }\n  cadastrar() {\n    if (this.validaCampos()) {\n      this.preencheTipoPessoa();\n      this.assessoresService.cadastrar(this.pessoa).subscribe(() => {\n        this.mensagemService.mensagemSucesso('Cadastro realizado com sucesso');\n        this.redirect();\n      }, error => {\n        this.mensagemService.mensagemError(error, 'Ocorreu um erro! Erro ao tentar cadastrar');\n      });\n    }\n  }\n  atualizar() {\n    if (this.validaCampos()) {\n      this.preencheTipoPessoa();\n      this.assessoresService.atualizar(this.pessoa).subscribe(() => {\n        this.mensagemService.mensagemSucesso('Registro atualizado com sucesso');\n        this.redirect();\n      }, error => {\n        this.mensagemService.mensagemError(error, 'Ocorreu um erro! Erro ao tentar atualizar');\n      });\n    }\n  }\n  redirect() {\n    this.router.navigate(['assessores']);\n  }\n  preencheTipoPessoa() {\n    const tipo = this.tipoPessoaList.find(tp => tp.id === TipoPessoaEnum.TIPO_ASSESSOR);\n    this.pessoa.tipoPessoa = tipo; //Exclamacao informa que tenho certeza que o valor nao eh nulo\n  }\n\n  validaCampos() {\n    if (this.pessoa.nome === null || this.pessoa.nome === undefined) {\n      this.mensagemService.mensagemAlerta('Por favor, informe o nome');\n      return false;\n    }\n    if (this.pessoa.vereador === null || this.pessoa.vereador === undefined) {\n      this.mensagemService.mensagemAlerta('Por favor, informe o vereador');\n      return false;\n    }\n    return true;\n  }\n  findById(assessorId) {\n    this.assessoresService.listarPorId(assessorId).subscribe(response => {\n      this.pessoa = response;\n    }, error => {\n      this.mensagemService.mensagemError(error, 'Ocorreu um erro! Erro ao tentar listar');\n    });\n  }\n  getTipoPessoas() {\n    this.tipoPessoaService.listarTipoPessoas().subscribe(response => {\n      this.tipoPessoaList = response;\n    }, error => {\n      this.mensagemService.mensagemError(error, 'Ocorreu um erro! Erro ao tentar listar');\n    });\n  }\n  getVereadores() {\n    this.vereadorService.listarTodos().subscribe(response => {\n      this.vereadorList = response;\n    }, error => {\n      this.mensagemService.mensagemError(error, 'Ocorreu um erro! Erro ao tentar listar');\n    });\n  }\n}\nAssessoresFormComponent.ɵfac = function AssessoresFormComponent_Factory(t) {\n  return new (t || AssessoresFormComponent)(i0.ɵɵdirectiveInject(i1.AssessoresService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MensagemService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i4.TipoPessoaService), i0.ɵɵdirectiveInject(i5.VereadoresService));\n};\nAssessoresFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AssessoresFormComponent,\n  selectors: [[\"app-servidores-form\"]],\n  decls: 30,\n  vars: 14,\n  consts: [[1, \"content-wrapper\", \"mt-4\"], [1, \"content\"], [1, \"container-fluid\"], [1, \"card\", \"card-secondary\"], [1, \"card-header\"], [1, \"card-title\"], [\"vereadorForm\", \"ngForm\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-md-8\"], [\"name\", \"nome\", \"type\", \"text\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [1, \"col-md-8\", \"mt-3\"], [1, \"form-group\"], [\"optionLabel\", \"nome\", \"placeholder\", \"Selecione\", \"name\", \"vereador\", 3, \"options\", \"ngModel\", \"ngModelChange\"], [1, \"btn-right\", \"mt-4\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Salvar\", \"icon\", \"pi pi-save\", \"class\", \"p-button-success p-button-sm\", 3, \"click\", 4, \"ngIf\"], [\"routerLink\", \"../\", \"pButton\", \"\", \"type\", \"button\", \"label\", \"Cancelar\", \"icon\", \"pi pi-angle-left\", 1, \"p-button-secondary\", \"p-button-sm\", \"ml-2\"], [1, \"col-md-4\"], [\"optionLabel\", \"descricao\", 3, \"options\", \"ngModel\", \"ngModelChange\"], [\"name\", \"tipoPessoa\", \"type\", \"text\", \"pInputText\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Salvar\", \"icon\", \"pi pi-save\", 1, \"p-button-success\", \"p-button-sm\", 3, \"click\"]],\n  template: function AssessoresFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h3\", 5);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"form\", null, 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"label\");\n      i0.ɵɵtext(13, \"Nome\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"br\");\n      i0.ɵɵelementStart(15, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function AssessoresFormComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.pessoa.nome = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(16, AssessoresFormComponent_div_16_Template, 6, 2, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 8);\n      i0.ɵɵtemplate(18, AssessoresFormComponent_div_18_Template, 6, 5, \"div\", 11);\n      i0.ɵɵelementStart(19, \"div\", 12)(20, \"div\", 13)(21, \"label\");\n      i0.ɵɵtext(22, \"Vereador\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"br\");\n      i0.ɵɵelementStart(24, \"p-dropdown\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function AssessoresFormComponent_Template_p_dropdown_ngModelChange_24_listener($event) {\n        return ctx.pessoa.vereador = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"p-footer\")(26, \"div\", 15);\n      i0.ɵɵtemplate(27, AssessoresFormComponent_button_27_Template, 1, 0, \"button\", 16);\n      i0.ɵɵtemplate(28, AssessoresFormComponent_button_28_Template, 1, 0, \"button\", 16);\n      i0.ɵɵelement(29, \"button\", 17);\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.titulo);\n      i0.ɵɵadvance(9);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(12, _c0));\n      i0.ɵɵproperty(\"ngModel\", ctx.pessoa.nome);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pessoa.id);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.pessoa.id);\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(13, _c0));\n      i0.ɵɵproperty(\"options\", ctx.vereadorList)(\"ngModel\", ctx.pessoa.vereador);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.pessoa.id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pessoa.id);\n    }\n  },\n  dependencies: [i6.NgIf, i2.RouterLink, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i8.ButtonDirective, i9.Footer, i10.InputText, i11.Dropdown],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["TipoPessoa","TipoPessoaEnum","Vereador","i0","AssessoresFormComponent","constructor","assessoresService","router","mensagemService","activedRoute","tipoPessoaService","vereadorService","nome","tipoPessoa","ativo","vereador","value","descricao","ngOnInit","getTipoPessoas","getVereadores","pessoaId","snapshot","paramMap","get","titulo","findById","cadastrar","validaCampos","preencheTipoPessoa","pessoa","subscribe","mensagemSucesso","redirect","error","mensagemError","atualizar","navigate","tipo","tipoPessoaList","find","tp","id","TIPO_ASSESSOR","undefined","mensagemAlerta","assessorId","listarPorId","response","listarTipoPessoas","listarTodos","vereadorList","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\samue\\Documents\\fullstackC\\requerimento-app\\src\\app\\assessores\\assessores-form\\assessores-form.component.ts","C:\\Users\\samue\\Documents\\fullstackC\\requerimento-app\\src\\app\\assessores\\assessores-form\\assessores-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MensagemService } from 'src/app/service/mensagemService';\nimport { TipoPessoa } from 'src/app/shared/model/tipo-pessoa.model';\nimport { TipoPessoaService } from 'src/app/tipo-pessoa/tipo-pessoa.service';\n\nimport { TipoPessoaEnum } from '../../shared/enum/tipo-pessoa.enum';\nimport { AssessoresService } from '../assessores.service';\nimport { Assessor } from './../../shared/model/assessor.model';\nimport { Vereador } from './../../shared/model/vereador.model';\nimport { VereadoresService } from './../../vereadores/vereadores.service';\n\n@Component({\n  selector: 'app-servidores-form',\n  templateUrl: './assessores-form.component.html',\n  styleUrls: ['./assessores-form.component.scss'],\n})\nexport class AssessoresFormComponent implements OnInit {\n  pessoa: Assessor = {\n    nome: '',\n    tipoPessoa: new TipoPessoa(),\n    ativo: true,\n    vereador: new Vereador(),\n  };\n  pessoaId: string | null;\n  tipoPessoaList: TipoPessoa[];\n  vereadorList: Vereador[];\n  titulo = 'Cadastrar assessor';\n  opcoesStatus = [\n    { value: true, descricao: 'Sim' },\n    { value: false, descricao: 'Não' },\n  ];\n\n  constructor(\n    private assessoresService: AssessoresService,\n    private router: Router,\n    private mensagemService: MensagemService,\n    private activedRoute: ActivatedRoute,\n    private tipoPessoaService: TipoPessoaService,\n    private vereadorService: VereadoresService\n  ) {}\n\n  ngOnInit(): void {\n    this.getTipoPessoas();\n    this.getVereadores();\n    this.pessoaId = this.activedRoute.snapshot.paramMap.get('id');\n    if (this.pessoaId !== null) {\n      this.titulo = 'Editar assessor';\n      this.findById(+this.pessoaId);\n    }\n  }\n\n  cadastrar(): void {\n    if (this.validaCampos()) {\n      this.preencheTipoPessoa();\n      this.assessoresService.cadastrar(this.pessoa).subscribe(\n        () => {\n          this.mensagemService.mensagemSucesso(\n            'Cadastro realizado com sucesso'\n          );\n          this.redirect();\n        },\n        (error) => {\n          this.mensagemService.mensagemError(\n            error,\n            'Ocorreu um erro! Erro ao tentar cadastrar'\n          );\n        }\n      );\n    }\n  }\n\n  atualizar(): void {\n    if (this.validaCampos()) {\n      this.preencheTipoPessoa();\n      this.assessoresService.atualizar(this.pessoa).subscribe(\n        () => {\n          this.mensagemService.mensagemSucesso(\n            'Registro atualizado com sucesso'\n          );\n          this.redirect();\n        },\n        (error) => {\n          this.mensagemService.mensagemError(\n            error,\n            'Ocorreu um erro! Erro ao tentar atualizar'\n          );\n        }\n      );\n    }\n  }\n\n  private redirect() {\n    this.router.navigate(['assessores']);\n  }\n\n  private preencheTipoPessoa(): void {\n    const tipo = this.tipoPessoaList.find(\n      (tp) => tp.id === TipoPessoaEnum.TIPO_ASSESSOR\n    );\n    this.pessoa.tipoPessoa = tipo!; //Exclamacao informa que tenho certeza que o valor nao eh nulo\n  }\n\n  private validaCampos(): boolean {\n    if (this.pessoa.nome === null || this.pessoa.nome === undefined) {\n      this.mensagemService.mensagemAlerta('Por favor, informe o nome');\n      return false;\n    }\n\n    if (this.pessoa.vereador === null || this.pessoa.vereador === undefined) {\n      this.mensagemService.mensagemAlerta('Por favor, informe o vereador');\n      return false;\n    }\n\n    return true;\n  }\n\n  private findById(assessorId: number): void {\n    this.assessoresService.listarPorId(assessorId).subscribe(\n      (response) => {\n        this.pessoa = response;\n      },\n      (error) => {\n        this.mensagemService.mensagemError(\n          error,\n          'Ocorreu um erro! Erro ao tentar listar'\n        );\n      }\n    );\n  }\n\n  public getTipoPessoas(): void {\n    this.tipoPessoaService.listarTipoPessoas().subscribe(\n      (response) => {\n        this.tipoPessoaList = response;\n      },\n      (error) => {\n        this.mensagemService.mensagemError(\n          error,\n          'Ocorreu um erro! Erro ao tentar listar'\n        );\n      }\n    );\n  }\n\n  private getVereadores(): void {\n    this.vereadorService.listarTodos().subscribe(\n      (response) => {\n        this.vereadorList = response;\n      },\n      (error) => {\n        this.mensagemService.mensagemError(\n          error,\n          'Ocorreu um erro! Erro ao tentar listar'\n        );\n      }\n    );\n  }\n}\n","<div class=\"content-wrapper mt-4\">\n  <section class=\"content\">\n    <div class=\"container-fluid\">\n\n      <div class=\"card card-secondary\">\n        <div class=\"card-header\">\n          <h3 class=\"card-title\">{{ titulo }}</h3>\n\n        </div>\n        <form #vereadorForm=\"ngForm\">\n          <div class=\"card-body\">\n            <div class=\"row\">\n              <div class=\"col-md-8\">\n                <label>Nome</label>\n                <br>\n                <input [(ngModel)]=\"pessoa.nome\" name=\"nome\" type=\"text\" pInputText [style]=\"{ width: '75%' }\">\n              </div>\n\n              <div class=\"col-md-4\" *ngIf=\"pessoa.id\">\n                <div class=\"form-group\">\n                  <label>Ativo</label>\n                  <br />\n                  <p-dropdown [options]=\"opcoesStatus\" [(ngModel)]=\"pessoa.ativo\" optionLabel=\"descricao\"></p-dropdown>\n                </div>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-md-4\" *ngIf=\"pessoa.id\">\n                <div class=\"form-group\">\n                  <label>Tipo</label>\n                  <br>\n                  <input [disabled]=\"true\" [(ngModel)]=\"pessoa.tipoPessoa.descricao\" name=\"tipoPessoa\" type=\"text\"\n                    pInputText [style]=\"{ width: '75%' }\">\n                </div>\n              </div>\n\n              <div class=\"col-md-8 mt-3\">\n                <div class=\"form-group\">\n                  <label>Vereador</label>\n                  <br>\n                  <p-dropdown [options]=\"vereadorList\" [(ngModel)]=\"pessoa.vereador\" optionLabel=\"nome\"\n                    placeholder=\"Selecione\" name=\"vereador\" [style]=\"{ width: '75%' }\"></p-dropdown>\n                </div>\n              </div>\n            </div>\n            <p-footer>\n              <div class=\"btn-right mt-4\">\n                <button (click)=\"cadastrar()\" pButton type=\"button\" label=\"Salvar\" icon=\"pi pi-save\"\n                  class=\"p-button-success p-button-sm\" *ngIf=\"!pessoa.id\"></button>\n                <button (click)=\"atualizar()\" pButton type=\"button\" label=\"Salvar\" icon=\"pi pi-save\"\n                  class=\"p-button-success p-button-sm\" *ngIf=\"pessoa.id\"></button>\n                <button routerLink=\"../\" pButton type=\"button\" label=\"Cancelar\" icon=\"pi pi-angle-left\"\n                  class=\"p-button-secondary p-button-sm ml-2\"></button>\n              </div>\n            </p-footer>\n            <!-- /.col -->\n          </div>\n        </form>\n      </div>\n      <!-- /.card-body -->\n\n\n    </div>\n    <!-- /.card -->\n\n    <!-- /.container-fluid -->\n  </section>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}