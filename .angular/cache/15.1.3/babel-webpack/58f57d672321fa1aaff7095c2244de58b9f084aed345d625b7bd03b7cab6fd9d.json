{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./../requerimento.service\";\nimport * as i2 from \"./../../service/mensagemService\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"primeng/table\";\nimport * as i5 from \"primeng/api\";\nimport * as i6 from \"@angular/common\";\nfunction RequerimentoListComponent_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2, \"N\\u00FAmero\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"Vereador\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Data\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Motivo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"A\\u00E7\\u00F5es\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/requerimentos\", a1];\n};\nfunction RequerimentoListComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵelement(9, \"div\", 16);\n    i0.ɵɵpipe(10, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"div\", 17)(13, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function RequerimentoListComponent_ng_template_17_Template_a_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const requerimento_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.gerarPdf(requerimento_r2));\n    });\n    i0.ɵɵelement(14, \"i\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 20);\n    i0.ɵɵelement(16, \"em\", 21);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const requerimento_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(requerimento_r2.numero);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(requerimento_r2.pessoa == null ? null : requerimento_r2.pessoa.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 5, requerimento_r2.dataRequerimento, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"innerHtml\", i0.ɵɵpipeBind3(10, 8, requerimento_r2.assunto, 0, 150), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c0, requerimento_r2.id));\n  }\n}\nconst _c1 = function () {\n  return [\"/requerimentos/cadastro\"];\n};\nconst _c2 = function () {\n  return [5, 10, 25, 50];\n};\nexport class RequerimentoListComponent {\n  constructor(requerimentoService, mensagemService) {\n    this.requerimentoService = requerimentoService;\n    this.mensagemService = mensagemService;\n    this.loading = false;\n  }\n  ngOnInit() {\n    this.listar();\n  }\n  listar() {\n    this.loading = true;\n    this.requerimentoService.listarTodos().subscribe(response => {\n      this.requerimentoList = response;\n      this.loading = false;\n    }, error => {\n      this.loading = false;\n      this.mensagemService.mensagemError(error, 'Erro ao tentar listar');\n    });\n  }\n  gerarPdf(requerimento) {\n    this.requerimentoService.gerarPdf(requerimento).subscribe(data => {\n      data = new Blob([data], {\n        type: 'application/pdf'\n      });\n      const objUrl = window.URL.createObjectURL(data);\n      const a = document.createElement('a');\n      a.href = objUrl;\n      a.target = '_blank';\n      a.download = 'requerimento' + requerimento.id + '.pdf';\n      window.document.body.appendChild(a);\n      a.click();\n      a.remove();\n      this.mensagemService.mensagemSucesso('O PDF está sendo gerado... Aguarde');\n    }, error => {\n      this.mensagemService.mensagemError(error, 'Desculpe, ocorreu um erro ao tentar gerar o PDF!');\n    });\n  }\n}\nRequerimentoListComponent.ɵfac = function RequerimentoListComponent_Factory(t) {\n  return new (t || RequerimentoListComponent)(i0.ɵɵdirectiveInject(i1.RequerimentoService), i0.ɵɵdirectiveInject(i2.MensagemService));\n};\nRequerimentoListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RequerimentoListComponent,\n  selectors: [[\"app-requerimento-list\"]],\n  decls: 18,\n  vars: 8,\n  consts: [[1, \"content-wrapper\", \"mt-4\"], [1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-12\"], [1, \"card\", \"card-secondary\"], [1, \"card-header\"], [1, \"card-title\"], [1, \"card-tools\", \"float-right\"], [1, \"input-group\", \"input-group-sm\"], [1, \"input-group-append\"], [\"type\", \"button\", 1, \"btn\", \"btn-block\", \"btn-primary\", 3, \"routerLink\"], [1, \"card-body\", \"table-responsive\", \"p-0\"], [\"responsiveLayout\", \"scroll\", 1, \"table\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"rowsPerPageOptions\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [3, \"innerHtml\"], [1, \"btn-group\"], [\"title\", \"Gerar arquivo\", 1, \"btn\", \"btn-white\", 3, \"click\"], [1, \"pi\", \"pi-file-pdf\"], [\"title\", \"Editar\", \"type\", \"button\", 1, \"btn\", \"btn-white\", 3, \"routerLink\"], [1, \"fa\", \"fa-edit\"]],\n  template: function RequerimentoListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"h3\", 7);\n      i0.ɵɵtext(8, \"Listagem de requerimentos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9)(11, \"div\", 10)(12, \"a\", 11);\n      i0.ɵɵtext(13, \"Novo requerimento\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(14, \"div\", 12)(15, \"p-table\", 13);\n      i0.ɵɵtemplate(16, RequerimentoListComponent_ng_template_16_Template, 11, 0, \"ng-template\", 14);\n      i0.ɵɵtemplate(17, RequerimentoListComponent_ng_template_17_Template, 17, 14, \"ng-template\", 15);\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(6, _c1));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.requerimentoList)(\"paginator\", true)(\"rows\", 5)(\"showCurrentPageReport\", false)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(7, _c2));\n    }\n  },\n  dependencies: [i3.RouterLink, i4.Table, i5.PrimeTemplate, i6.SlicePipe, i6.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","RequerimentoListComponent","constructor","requerimentoService","mensagemService","ngOnInit","listar","loading","listarTodos","subscribe","response","requerimentoList","error","mensagemError","gerarPdf","requerimento","data","Blob","type","objUrl","window","URL","createObjectURL","a","document","createElement","href","target","download","id","body","appendChild","click","remove","mensagemSucesso","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\samue\\Documents\\fullstackC\\requerimento-app\\src\\app\\requerimento\\requerimento-list\\requerimento-list.component.html","C:\\Users\\samue\\Documents\\fullstackC\\requerimento-app\\src\\app\\requerimento\\requerimento-list\\requerimento-list.component.ts"],"sourcesContent":["<div class=\"content-wrapper mt-4\">\r\n  <section class=\"content\">\r\n    <div class=\"container-fluid\">\r\n\r\n      <!-- /.row -->\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"card card-secondary\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title\">Listagem de requerimentos</h3>\r\n\r\n              <div class=\"card-tools float-right\">\r\n                <div class=\"input-group input-group-sm\">\r\n                  <div class=\"input-group-append\">\r\n                    <a [routerLink]=\"['/requerimentos/cadastro']\" type=\"button\" class=\"btn btn-block btn-primary\">Novo\r\n                      requerimento</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- /.card-header -->\r\n            <div class=\"card-body table-responsive p-0\">\r\n\r\n              <p-table [value]=\"requerimentoList\" responsiveLayout=\"scroll\" class=\"table\" [paginator]=\"true\" [rows]=\"5\"\r\n                [showCurrentPageReport]=\"false\" [rowsPerPageOptions]=\"[5, 10, 25, 50]\">\r\n                <ng-template pTemplate=\"header\">\r\n                  <tr>\r\n                    <th>Número</th>\r\n                    <th>Vereador</th>\r\n                    <th>Data</th>\r\n                    <th>Motivo</th>\r\n                    <th>Ações</th>\r\n                  </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"body\" let-requerimento>\r\n                  <tr>\r\n                    <td>{{ requerimento.numero }}</td>\r\n                    <td>{{ requerimento.pessoa?.nome }}</td>\r\n                    <td>{{ requerimento.dataRequerimento | date: 'dd-MM-yyyy HH:mm' }}</td>\r\n                    <td>\r\n                      <div [innerHtml]=\"requerimento.assunto | slice:0:150\"></div>\r\n                    </td>\r\n                    <td>\r\n                      <div class=\"btn-group\">\r\n                        <a (click)=\"gerarPdf(requerimento)\" class=\"btn btn-white\" title=\"Gerar arquivo\">\r\n                          <i class=\"pi pi-file-pdf\"></i>\r\n                        </a>\r\n                        <button title=\"Editar\" type=\"button\" class=\"btn btn-white\"\r\n                          [routerLink]=\"['/requerimentos', requerimento.id]\">\r\n                          <em class=\"fa fa-edit\"></em>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                </ng-template>\r\n              </p-table>\r\n            </div>\r\n            <!-- /.card-body -->\r\n          </div>\r\n          <!-- /.card -->\r\n        </div>\r\n      </div>\r\n      <!-- /.row -->\r\n    </div>\r\n  </section>\r\n</div>\r\n","import { MensagemService } from './../../service/mensagemService';\nimport { Requerimento } from '../../shared/model/requerimento.model';\nimport { RequerimentoService } from './../requerimento.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-requerimento-list',\n  templateUrl: './requerimento-list.component.html',\n  styleUrls: ['./requerimento-list.component.scss'],\n})\nexport class RequerimentoListComponent implements OnInit {\n  requerimentoList: Requerimento[];\n  loading = false;\n  constructor(\n    private requerimentoService: RequerimentoService,\n    private mensagemService: MensagemService\n  ) {}\n\n  ngOnInit(): void {\n    this.listar();\n  }\n\n  public listar() {\n    this.loading = true;\n    this.requerimentoService.listarTodos().subscribe(\n      (response: Requerimento[]): void => {\n        this.requerimentoList = response;\n        this.loading = false;\n      },\n      (error) => {\n        this.loading = false;\n        this.mensagemService.mensagemError(error, 'Erro ao tentar listar');\n      }\n    );\n  }\n\n  gerarPdf(requerimento: Requerimento): void {\n    this.requerimentoService.gerarPdf(requerimento).subscribe(\n      (data) => {\n        data = new Blob([data], { type: 'application/pdf' });\n        const objUrl = window.URL.createObjectURL(data);\n        const a = document.createElement('a');\n        a.href = objUrl;\n        a.target = '_blank';\n        a.download = 'requerimento' + requerimento.id + '.pdf';\n        window.document.body.appendChild(a);\n        a.click();\n        a.remove();\n        this.mensagemService.mensagemSucesso(\n          'O PDF está sendo gerado... Aguarde'\n        );\n      },\n\n      (error) => {\n        this.mensagemService.mensagemError(\n          error,\n          'Desculpe, ocorreu um erro ao tentar gerar o PDF!'\n        );\n      }\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}